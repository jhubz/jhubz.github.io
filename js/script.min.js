var mobileMenuButton=document.querySelector(".site-header .mobile-nav-btn"),mobileMenuButtonActive=!1,mobileMenu=document.querySelector(".site-navigation .mobile-menu"),mobileMenuItemCopy=document.querySelector(".mobile-menu-item-copy"),aboutMe=document.querySelector(".about-me"),upButton=document.querySelector("body .up-button"),upButtonLink=document.querySelector("body .up-button a"),lastId,topMenu=$("#top-menu"),topMenuHeight=topMenu.outerHeight(),topHeader=$("#top-header"),topHeaderHeight=topHeader.outerHeight(),menuItems=topMenu.find("a"),scrollItems=menuItems.map(function(){var e=$($(this).attr("href"));return e.length?e:void 0});mobileMenuButton.addEventListener("click",function(e){if(e.preventDefault(),mobileMenu.classList.contains("mobile-menu-opened"))mobileMenu.classList.remove("mobile-menu-opened"),mobileMenu.classList.add("mobile-menu-closed"),mobileMenu.style.display="none",mobileMenuButton.classList.remove("mobile-nav-btn-active"),mobileMenuButton.style.top="0",mobileMenuButtonActive=!1,aboutMe.style.paddingTop="0";else if(mobileMenu.classList.contains("mobile-menu-closed")||mobileMenu.classList.contains("mobile-menu")){mobileMenu.style.display="block",mobileMenu.classList.remove("mobile-menu-closed"),mobileMenu.classList.add("mobile-menu-opened"),mobileMenuButton.classList.add("mobile-nav-btn-active"),mobileMenuButton.style.top="20px",mobileMenuButtonActive=!0;var t=topMenu.outerHeight();aboutMe.style.paddingTop=t-.8*topHeaderHeight+"px"}}),menuItems.click(function(e){var t=$(this).attr("href"),o="#"===t?0:$(t).offset().top-topHeaderHeight+1;mobileMenuButtonActive&&(o="#"===t?0:$(t).offset().top-topMenuHeight),$("html, body").stop().animate({scrollTop:o},600),e.preventDefault()}),$(document).on("click","body .up-button a",function(e){$("html, body").stop().animate({scrollTop:0},600),e.preventDefault()}),$(window).scroll(function(){upButton.style.right=window.pageYOffset>600?"30px":"-1000px";var e=$(this).scrollTop()+topHeaderHeight;mobileMenuButtonActive&&(e=$(this).scrollTop()+topMenuHeight+10);var t=scrollItems.map(function(){return $(this).offset().top<e?this:void 0});t=t[t.length-1];var o=t&&t.length?t[0].id:"";if(lastId!==o){lastId=o,menuItems.parent().removeClass("active").end().filter("[href='#"+o+"']").parent().addClass("active");var n=document.querySelector(".site-navigation .mobile-menu .active a");window.pageYOffset>100&&$(".mobile-menu-item-copy").animate({opacity:"0"},0),mobileMenuItemCopy.innerHTML=n.innerHTML,window.pageYOffset>100&&$(".mobile-menu-item-copy").animate({opacity:"1"},600)}});